<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EOT - Excel Over Time</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Sans+SC:wght@300;400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans TC', 'Noto Sans SC', 'Noto Sans JP', 'Noto Sans KR', sans-serif;
        }
        
        /* BCG Color Palette */
        :root {
            --bcg-green: #1F5C46;
            --bcg-light-green: #2F8365;
            --bcg-gold: #D4AF37;
        }

        /* Flash Card 3D Flip Styles */
        .perspective-1000 {
            perspective: 1000px;
        }
        
        .transform-style-3d {
            transform-style: preserve-3d;
        }
        
        .backface-hidden {
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        .rotate-y-180 {
            transform: rotateY(180deg);
        }
    </style>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        bcg: {
                            DEFAULT: '#1F5C46',
                            light: '#2F8365',
                            dark: '#0e3a2b',
                            gray: '#F3F4F6',
                            gold: '#D4AF37'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 1. Global Constants & Data ---
        
        const videoList = [
            { title: "1. 看見世界, 了解產業, 塑造你自己", url: "https://youtu.be/RVeT7DyKTYE" },
            { title: "2. 以職能建立為目標的學習", url: "https://youtu.be/XQk_c0w80FQ" },
            { title: "3. EMI課堂[Busniess News and Analysis]實境 -Marketing Funnel", url: "https://youtu.be/bB0Ly8KgR9U" },
            { title: "4. EMI數位教材 - 災害防救建專案管理", url: "https://youtu.be/JQzJYEH1Fs0" },
            { title: "5. 數位課程[新興產業趨勢]教材- 中小企業導入智慧製造", url: "https://youtu.be/QNZS-xDdY0I" },
            { title: "6. 大一新鮮人須知(國企系)", url: "https://youtu.be/vozEwUakzbs" }
        ];

        const identities = [
            "高中師生", "大學師生", "大學行政", "學生家長", "校友系友", "產業先進", "其他"
        ];

        const languageOptions = [
            { code: "TC", label: "繁體中文" },
            { code: "ENG", label: "English" },
            { code: "SC", label: "简体中文" },
            { code: "VI", label: "Tiếng Việt" },
            { code: "ID", label: "Bahasa Indonesia" },
            { code: "MS", label: "Bahasa Melayu" },
            { code: "MY", label: "Burmese (မြန်မာစာ)" },
            { code: "ES", label: "Español" },
            { code: "FR", label: "Français" },
            { code: "DE", label: "Deutsch" },
            { code: "JA", label: "日本語" },
            { code: "KO", label: "한국어" },
        ];

        const glossaryKeys = [
            { t: "Inclusive Excellence (IE)", d: "Excellence and inclusion are inseparable." },
            { t: "Meritocracy", d: "System rewarding past credentials, often ignoring inequity." },
            { t: "Gatekeeping", d: "Defining value by exclusion." },
            { t: "Groundskeeping", d: "Cultivating diverse talent to thrive." },
            { t: "Contextualized Review", d: "Evaluating achievement within socioeconomic context." },
            { t: "Resilience Flag", d: "Weighted marker for high performance despite low resources." },
            { t: "Distance Traveled", d: "Measuring progress from starting point." },
            { t: "Strategic Framework", d: "A structured plan to achieve long-term goals." },
            { t: "Asset-based Model", d: "Viewing diversity as a source of innovation." },
            { t: "Cultural Capital", d: "Social assets promoting social mobility." },
            { t: "OIE Office", d: "Office of Inclusive Excellence." },
            { t: "Systematic Change", d: "Fundamental changes in policies and practices." },
            { t: "USR Impact", d: "University Social Responsibility effect." },
            { t: "Rubric Scoring", d: "Scoring guide ensuring evaluation consistency." },
            { t: "AI Disclosure", d: "Statement revealing use of AI in work." },
            { t: "Honors Degree", d: "Degree indicating high academic achievement." },
            { t: "Peer Mentoring", d: "Students supporting other students." },
            { t: "Capstone Project", d: "Culminating academic project." },
            { t: "Career Development", d: "Managing learning and work over lifespan." },
            { t: "EMI Learning", d: "English as Medium of Instruction." },
            { t: "Digital Transformation", d: "Integrating digital tech into all areas." },
            { t: "Learning Analytics", d: "Measurement and analysis of data about learners." }
        ];

        // --- 2. Content Data Structures ---

        // English Content Structure (Base)
        const baseContentENG = {
            meta: { 
                title: "EOT - Excel Over Time", 
                slogan: "Inclusive excellence, excelling over time.", 
                nav: "Navigation", 
                glossary: "Glossary", 
                try: "Try Again", 
                copyright: "Copyright © 2025 EOT - Excel Over Time. All Rights Reserved." 
            },
            labels: { 
                highlights: "Highlights", 
                actionPlan: "Action Plan", 
                keywords: "Keywords", 
                flashcards: "Flash Cards", 
                quiz: "Quick Quiz", 
                videos: "Video Playlists", 
                history: "Usage History", 
                feedback: "Feedback & Contact" 
            },
            sections: [
                { t: "0. Executive Summary", h: ["Core Strategy: Inclusive Excellence (IE).", "Transformation: Gatekeeping to Groundskeeping.", "Dual Practice: 2-Stage Admissions & Honors."], a: ["Establish OIE Office.", "Implement Context Review.", "Launch Honors Pilot."], k: ["Inclusive Excellence", "Gatekeeping", "Framework"] },
                { t: "1. Vision & Philosophy", h: ["Redefining: From Exclusivity to Inclusion.", "Asset Model: Diversity as Capital.", "Creating Winners: Not just finding."], a: ["Publish IE White Paper.", "Promote Context Assessment.", "Widen pool, don't lower standards."], k: ["Asset-based Model", "Cultural Capital", "Context"] },
                { t: "2. Strategic Roadmap", h: ["Phase 1: Roots & Consensus.", "Phase 2: Systematic Change.", "Phase 3: Diffusion."], a: ["Launch OIE.", "Revise promotion criteria.", "Early warning network."], k: ["OIE Office", "Systematic Change", "USR Impact"] },
                { t: "3. Admissions Strategy", h: ["2-Stage Review: Context + Potential.", "Stage 1: Resilience Flags.", "Stage 2: Essay & AI Disclosure."], a: ["Build Data Dashboard.", "Design Structured Essays.", "AI Literacy Test."], k: ["Resilience Flag", "Rubric Scoring", "AI Disclosure"] },
                { t: "4. Honors Program", h: ["Transform Book Prize: Top 5% to Honors.", "Self to Society: Impact funds.", "Modules: Input + Output."], a: ["AI/EMI Courses.", "Peer Mentoring.", "Capstone Project."], k: ["Honors Degree", "Peer Mentoring", "Capstone"] },
                { t: "5. Video Playlists", h: ["Talks on career and industry.", "EMI and digital materials.", "Freshman info."], a: ["Watch 'Seeing the World'.", "Familiarize with EMI.", "Learn digital design."], k: ["Career", "EMI", "Digital"] },
                { t: "6. Usage History", h: ["View login info.", "Track progress.", "Analyze performance."], a: ["Check progress regularly.", "Review incorrect sections."], k: ["Analytics", "Tracking", "Profile"] },
                { t: "7. Feedback & Contact", h: ["Provide feedback.", "Contact creator.", "Join co-creation."], a: ["Fill feedback form.", "Send email."], k: ["Feedback", "Communication", "Co-creation"] }
            ]
        };

        // Traditional Chinese Content Structure
        const baseContentTC = {
            meta: { 
                title: "EOT - Excel Over Time", 
                slogan: "Inclusive excellence, excelling over time.", 
                nav: "導覽目錄", 
                glossary: "術語表", 
                try: "再試一次", 
                copyright: "版權所有 © 2025 EOT - Excel Over Time. 保留所有權利。" 
            },
            labels: { 
                highlights: "重點摘要", 
                actionPlan: "行動計畫", 
                keywords: "關鍵字", 
                flashcards: "觀念翻轉卡", 
                quiz: "隨堂測驗", 
                videos: "精選播放清單", 
                history: "使用歷程", 
                feedback: "留言與聯絡" 
            },
            sections: [
                { t: "0. 執行摘要", h: ["核心戰略：導入共融性卓越 (IE)。", "關鍵轉型：從守門員轉為園丁。", "雙軌實踐：兩階段審查 + 榮譽學程。"], a: ["成立 OIE 辦公室。", "建立情境化審查機制。", "啟動榮譽學程先導班。"], k: ["共融性卓越", "守門員", "策略架構"] },
                { t: "1. 願景與哲學", h: ["重新定義卓越：從稀缺性轉向共融性。", "資產模式：視弱勢背景為文化資本。", "創造贏家：挖掘潛力而非僅尋找現成贏家。"], a: ["發布 IE 白皮書。", "推動情境化評估。", "消除降低標準的誤解。"], k: ["資產導向", "文化資本", "情境化"] },
                { t: "2. 策略發展藍圖", h: ["第一階段：紮根與共識。", "第二階段：系統性變革。", "第三階段：典範與擴散。"], a: ["啟動 OIE。", "修訂升等辦法。", "建立預警網絡。"], k: ["OIE辦公室", "系統變革", "USR影響力"] },
                { t: "3. 多元入學策略", h: ["兩階段審查：校級 + 院系級。", "第一階段：韌性標記。", "第二階段：Essay 與 AI 聲明。"], a: ["建置數據儀表板。", "設計結構化 Essay。", "實施 AI 素養測驗。"], k: ["韌性標記", "評分規準", "AI聲明"] },
                { t: "4. 榮譽學程", h: ["轉型書卷獎：前 5% 學生進入。", "兼善天下：獎金轉專題基金。", "雙模組：Input + Output。"], a: ["開設 AI/EMI 課程。", "落實同儕輔導。", "完成 Capstone。"], k: ["榮譽學位", "同儕輔導", "總整專題"] },
                { t: "5. 精選播放清單", h: ["收錄職涯與產業趨勢講座。", "EMI 實境與數位教材。", "大一須知與轉型案例。"], a: ["觀看「看見世界」反思定位。", "熟悉全英語環境。", "學習數位課程設計。"], k: ["職涯發展", "EMI教學", "數位轉型"] },
                { t: "6. 使用歷程", h: ["檢視個人登入資訊。", "追蹤測驗完成進度。", "分析學習成效。"], a: ["定期檢查完成度。", "針對錯誤章節複習。"], k: ["學習分析", "進度追蹤", "使用者"] },
                { t: "7. 留言與聯絡", h: ["提供寶貴意見。", "直接聯繫計畫主持人。", "參與共創討論。"], a: ["填寫回饋表單。", "發送電子郵件。"], k: ["回饋循環", "溝通", "共創"] }
            ]
        };

        // Helper for other languages (Using ENG content structure but replacing titles/labels)
        const createLangContent = (titles, labels, copyright) => {
            // Safe copy of baseContentENG
            const content = JSON.parse(JSON.stringify(baseContentENG));
            
            // Update Meta
            content.meta.copyright = copyright;
            
            // Update Labels
            content.labels = { ...content.labels, ...labels };
            
            // Update Section Titles
            if (titles && titles.length === content.sections.length) {
                content.sections.forEach((sec, idx) => {
                    sec.t = titles[idx];
                });
            }
            return content;
        };

        // Section Titles per language (Simplified for demo)
        const sectionTitles = {
            SC: ["0. 执行摘要", "1. 愿景与哲学", "2. 策略发展蓝图", "3. 多元入学策略", "4. 荣誉学程", "5. 精选播放列表", "6. 使用历程", "7. 留言与联络"],
            JA: ["0. エグゼクティブサマリー", "1. ビジョンと哲学", "2. 戦略ロードマップ", "3. 入学戦略", "4. オナーズプログラム", "5. おすすめ動画", "6. 使用履歴", "7. フィードバック"],
            KO: ["0. 요약", "1. 비전 및 철학", "2. 전략 로드맵", "3. 입학 전략", "4. 아너스 프로그램", "5. 추천 영상", "6. 사용 기록", "7. 피드백"],
            VI: ["0. Tóm tắt", "1. Tầm nhìn", "2. Lộ trình", "3. Tuyển sinh", "4. Danh dự", "5. Video", "6. Lịch sử", "7. Phản hồi"],
            ES: ["0. Resumen", "1. Visión", "2. Hoja de Ruta", "3. Admisión", "4. Honores", "5. Videos", "6. Historial", "7. Contacto"],
            FR: ["0. Résumé", "1. Vision", "2. Feuille de Route", "3. Admission", "4. Honneur", "5. Vidéos", "6. Historique", "7. Contact"],
            DE: ["0. Zusammenfassung", "1. Vision", "2. Roadmap", "3. Zulassung", "4. Honors", "5. Videos", "6. Verlauf", "7. Kontakt"],
            ID: ["0. Ringkasan", "1. Visi", "2. Peta Jalan", "3. Penerimaan", "4. Kehormatan", "5. Video", "6. Riwayat", "7. Kontak"],
            MS: ["0. Ringkasan", "1. Visi", "2. Pelan Hala Tuju", "3. Kemasukan", "4. Kepujian", "5. Video", "6. Sejarah", "7. Hubungi"],
            MY: ["0. အကျဉ်းချုပ်", "1. မျှော်မှန်းချက်", "2. လမ်းပြမြေပုံ", "3. ဝင်ခွင့်", "4. ဂုဏ်ထူးတန်း", "5. ဗီဒီယို", "6. မှတ်တမ်း", "7. ဆက်သွယ်ရန်"]
        };

        // Full Translations Map
        const translations = {
            TC: baseContentTC,
            ENG: baseContentENG,
            SC: createLangContent(sectionTitles.SC, { highlights: "重点摘要", actionPlan: "行动计划", quiz: "测验" }, "版权所有 © 2025 EOT - Excel Over Time."),
            JA: createLangContent(sectionTitles.JA, { highlights: "ハイライト", actionPlan: "アクションプラン", quiz: "クイズ" }, "Copyright © 2025 EOT - Excel Over Time."),
            KO: createLangContent(sectionTitles.KO, { highlights: "하이라이트", actionPlan: "실행 계획", quiz: "퀴즈" }, "Copyright © 2025 EOT - Excel Over Time."),
            VI: createLangContent(sectionTitles.VI, { highlights: "Điểm nổi bật", actionPlan: "Kế hoạch", quiz: "Trắc nghiệm" }, "Bản quyền © 2025 EOT - Excel Over Time."),
            ES: createLangContent(sectionTitles.ES, { highlights: "Destacados", actionPlan: "Plan", quiz: "Cuestionario" }, "Copyright © 2025 EOT - Excel Over Time."),
            FR: createLangContent(sectionTitles.FR, { highlights: "Points forts", actionPlan: "Plan d'action", quiz: "Quiz" }, "Copyright © 2025 EOT - Excel Over Time."),
            DE: createLangContent(sectionTitles.DE, { highlights: "Highlights", actionPlan: "Aktionsplan", quiz: "Quiz" }, "Copyright © 2025 EOT - Excel Over Time."),
            ID: createLangContent(sectionTitles.ID, { highlights: "Sorotan", actionPlan: "Rencana", quiz: "Kuis" }, "Hak Cipta © 2025 EOT - Excel Over Time."),
            MS: createLangContent(sectionTitles.MS, { highlights: "Sorotan", actionPlan: "Pelan", quiz: "Kuiz" }, "Hak Cipta © 2025 EOT - Excel Over Time."),
            MY: createLangContent(sectionTitles.MY, { highlights: "အဓိကအချက်များ", actionPlan: "လုပ်ငန်းစဉ်", quiz: "ပဟေဠိ" }, "Copyright © 2025 EOT - Excel Over Time.")
        };

        // --- 3. Data Processing Helper ---
        const getSectionData = (langCode) => {
            const content = translations[langCode] || translations['ENG'];
            
            return content.sections.map((s, idx) => {
                const enriched = { 
                    id: idx,
                    title: s.t,
                    highlights: s.h,
                    actionPlan: s.a,
                    keywords: s.k
                };
                
                if (idx === 5) {
                    enriched.videos = videoList;
                } else if (idx === 6) {
                    enriched.isHistory = true;
                } else if (idx === 7) {
                    enriched.isFeedback = true;
                } else {
                    // Flashcards & Quiz for Sections 0-4
                    if (langCode === 'TC') {
                        enriched.flashcards = [
                            { front: "共融性卓越", back: "卓越與共融密不可分" },
                            { front: "守門員機制", back: "以排他性定義價值" },
                            { front: "園丁機制", back: "建構人才培育生態系" }
                        ];
                        enriched.quiz = [
                            { q: "核心價值為何？", options: ["菁英主義", "共融性卓越", "齊頭式平等"], ans: 1 },
                            { q: "大學角色應轉型為？", options: ["記帳員", "園丁 (Groundskeeping)", "警衛"], ans: 1 },
                            { q: "計畫實施期程？", options: ["2023-2025", "2025-2030", "2030-2040"], ans: 1 }
                        ];
                    } else {
                        enriched.flashcards = [
                            { front: "Inclusive Excellence", back: "Excellence & Inclusion Inseparable" },
                            { front: "Gatekeeping", back: "Exclusion based value" },
                            { front: "Groundskeeping", back: "Cultivation ecosystem" }
                        ];
                        enriched.quiz = [
                            { q: "Core Value?", options: ["Meritocracy", "Inclusive Excellence", "Equality"], ans: 1 },
                            { q: "Role Shift?", options: ["Accountant", "Groundskeeping", "Guard"], ans: 1 },
                            { q: "Timeline?", options: ["2023-25", "2025-30", "2030-40"], ans: 1 }
                        ];
                    }
                }
                return enriched;
            });
        };

        const getYouTubeID = (url) => {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        };

        // --- 4. Components ---

        const Flashcard = ({ front, back, instruction }) => {
            const [flipped, setFlipped] = useState(false);
            return (
                <div 
                    className={`group w-full h-40 cursor-pointer perspective-1000`}
                    onClick={() => setFlipped(!flipped)}
                >
                    <div className={`relative w-full h-full text-center transition-transform duration-500 transform-style-3d ${flipped ? 'rotate-y-180' : ''}`}>
                        <div className="absolute w-full h-full backface-hidden bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center p-4 z-10">
                            <h3 className="text-lg font-bold text-bcg dark:text-bcg-light mb-2">{front}</h3>
                            <p className="text-xs text-gray-400 mt-2">({instruction})</p>
                        </div>
                        <div className="absolute w-full h-full backface-hidden bg-bcg text-white rounded-lg shadow-md flex items-center justify-center p-4 rotate-y-180">
                            <p className="text-sm font-medium">{back}</p>
                        </div>
                    </div>
                </div>
            );
        };

        const Quiz = ({ question, options, answer, texts, onAnswer, isAnsweredCorrectly }) => {
            const [selected, setSelected] = useState(null);
            const [status, setStatus] = useState(null); 

            const handleCheck = (idx) => {
                setSelected(idx);
                const isCorrect = idx === answer;
                setStatus(isCorrect ? 'correct' : 'wrong');
                if (onAnswer) onAnswer(isCorrect);
            };

            const reset = () => {
                setSelected(null);
                setStatus(null);
            };

            return (
                <div className="p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-l-4 border-bcg mb-4">
                    <p className="font-semibold mb-3 text-gray-800 dark:text-gray-200">{question}</p>
                    <div className="space-y-2">
                        {options.map((opt, idx) => (
                            <button
                                key={idx}
                                onClick={() => handleCheck(idx)}
                                disabled={status === 'correct' || isAnsweredCorrectly}
                                className={`w-full text-left p-2 rounded text-sm transition-colors duration-200 border
                                    ${(status === 'correct' || isAnsweredCorrectly) && idx === answer ? 'bg-green-100 text-green-800 border-green-500' : ''}
                                    ${status === 'wrong' && idx === selected ? 'bg-red-100 text-red-800 border-red-500' : 'border-transparent'}
                                    ${status === null && !isAnsweredCorrectly ? 'hover:bg-gray-100 dark:hover:bg-gray-700 bg-gray-50 dark:bg-gray-700' : ''}
                                    ${(status !== null || isAnsweredCorrectly) && idx !== answer && idx !== selected ? 'opacity-50' : ''}
                                `}
                            >
                                {opt}
                                {(status === 'correct' || isAnsweredCorrectly) && idx === answer && <i className="fas fa-check float-right mt-1"></i>}
                                {status === 'wrong' && idx === selected && <i className="fas fa-times float-right mt-1"></i>}
                            </button>
                        ))}
                    </div>
                    {status === 'wrong' && (
                        <button onClick={reset} className="mt-3 text-xs text-bcg hover:underline font-bold">
                            {texts.try} <i className="fas fa-redo"></i>
                        </button>
                    )}
                </div>
            );
        };

        const VideoCard = ({ video }) => {
            const videoID = getYouTubeID(video.url);
            const thumbUrl = videoID ? `https://img.youtube.com/vi/${videoID}/mqdefault.jpg` : 'https://via.placeholder.com/320x180?text=No+Thumbnail';

            return (
                <a href={video.url} target="_blank" rel="noopener noreferrer" className="block group">
                    <div className="bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow">
                        <div className="relative aspect-video bg-gray-200 dark:bg-gray-700 overflow-hidden">
                            <img src={thumbUrl} alt={video.title} className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" />
                            <div className="absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300">
                                <i className="fas fa-play-circle text-4xl text-white opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </div>
                        </div>
                        <div className="p-4">
                            <h4 className="font-semibold text-gray-800 dark:text-gray-100 text-sm line-clamp-2 mb-2 group-hover:text-bcg transition-colors">{video.title}</h4>
                            <span className="text-xs text-bcg font-bold uppercase tracking-wider flex items-center">
                                Watch Video <i className="fas fa-external-link-alt ml-1"></i>
                            </span>
                        </div>
                    </div>
                </a>
            );
        };

        const LoginPage = ({ onLogin, texts, creatorInfo }) => {
            const [email, setEmail] = useState("");
            const [name, setName] = useState("");
            const [identity, setIdentity] = useState(identities[0]);
            const [currentTime, setCurrentTime] = useState(new Date());

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const handleSubmit = (e) => {
                e.preventDefault();
                if(!email) return;
                onLogin({ email, name, identity, loginTime: new Date() });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-bcg-dark to-bcg flex items-center justify-center p-4">
                    <div className="bg-white dark:bg-gray-900 rounded-xl shadow-2xl p-8 max-w-md w-full animate-fade-in">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-bold text-bcg dark:text-bcg-light tracking-tight mb-2">EOT</h1>
                            <p className="text-sm text-gray-500 dark:text-gray-400 italic">{texts.slogan}</p>
                            <div className="mt-4 text-xs font-mono text-gray-400">
                                {currentTime.toLocaleString()}
                            </div>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-xs font-bold text-gray-500 uppercase mb-1">E-mail (必填/Required)</label>
                                <input 
                                    type="email" 
                                    required
                                    className="w-full p-3 border border-gray-300 dark:border-gray-700 rounded focus:ring-2 focus:ring-bcg outline-none bg-gray-50 dark:bg-gray-800 dark:text-white"
                                    placeholder="visitor@example.com"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                />
                            </div>
                            
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Name (選填)</label>
                                    <input 
                                        type="text" 
                                        className="w-full p-3 border border-gray-300 dark:border-gray-700 rounded focus:ring-2 focus:ring-bcg outline-none bg-gray-50 dark:bg-gray-800 dark:text-white"
                                        placeholder="Name"
                                        value={name}
                                        onChange={(e) => setName(e.target.value)}
                                    />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Identity</label>
                                    <select 
                                        className="w-full p-3 border border-gray-300 dark:border-gray-700 rounded focus:ring-2 focus:ring-bcg outline-none bg-gray-50 dark:bg-gray-800 dark:text-white"
                                        value={identity}
                                        onChange={(e) => setIdentity(e.target.value)}
                                    >
                                        {identities.map(id => <option key={id} value={id}>{id}</option>)}
                                    </select>
                                </div>
                            </div>

                            <button type="submit" className="w-full bg-bcg hover:bg-bcg-dark text-white font-bold py-3 rounded transition shadow-lg mt-4">
                                訪客登入 (Visitor Login)
                            </button>
                            
                            <button type="button" disabled className="w-full bg-red-50 text-red-400 font-bold py-3 rounded border border-red-100 cursor-not-allowed text-sm">
                                <i className="fab fa-google mr-2"></i> Gmail Login (To Be Done)
                            </button>
                        </form>

                        <div className="mt-8 pt-6 border-t border-gray-100 dark:border-gray-800 text-center text-xs text-gray-400">
                            <p>Version: 2025/12/11</p>
                            <p className="mt-1">{texts.copyright}</p>
                            <a href="https://www.ibs.ncnu.edu.tw/index.php/faculty/tenured-professor/299-smlo" target="_blank" className="hover:text-bcg transition block mt-2">
                                {creatorInfo}
                            </a>
                        </div>
                    </div>
                </div>
            );
        };

        const UsageHistory = ({ user, quizProgress, sections }) => {
            const totalQuestions = sections.reduce((acc, sec) => acc + (sec.quiz ? sec.quiz.length : 0), 0);
            const answeredCorrectly = Object.values(quizProgress).reduce((acc, sectionResults) => {
                return acc + Object.values(sectionResults).filter(Boolean).length;
            }, 0);

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700">
                        <h3 className="text-lg font-bold text-bcg mb-4"><i className="fas fa-id-card mr-2"></i> User Profile</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div><span className="font-semibold text-gray-500">Name:</span> {user.name || "Guest"}</div>
                            <div><span className="font-semibold text-gray-500">Identity:</span> {user.identity}</div>
                            <div><span className="font-semibold text-gray-500">Email:</span> {user.email}</div>
                            <div><span className="font-semibold text-gray-500">Login Time:</span> {user.loginTime.toLocaleString()}</div>
                        </div>
                    </div>

                    <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700">
                        <h3 className="text-lg font-bold text-bcg mb-4"><i className="fas fa-chart-pie mr-2"></i> Quiz Progress</h3>
                        <div className="mb-6">
                            <div className="flex justify-between mb-1">
                                <span className="text-sm font-medium text-bcg">Total Completion</span>
                                <span className="text-sm font-medium text-bcg">{answeredCorrectly} / {totalQuestions}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                                <div className="bg-bcg h-2.5 rounded-full" style={{ width: `${totalQuestions > 0 ? (answeredCorrectly/totalQuestions)*100 : 0}%` }}></div>
                            </div>
                        </div>

                        <div className="space-y-4">
                            {sections.map(sec => {
                                if (!sec.quiz || sec.quiz.length === 0) return null;
                                const secCorrect = quizProgress[sec.id] ? Object.values(quizProgress[sec.id]).filter(Boolean).length : 0;
                                return (
                                    <div key={sec.id} className="border-b border-gray-100 dark:border-gray-700 pb-2 last:border-0">
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="text-sm text-gray-700 dark:text-gray-300">{sec.title.split(' ')[1] || sec.title}</span>
                                            <span className="text-xs font-mono bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded">
                                                {secCorrect} / {sec.quiz.length}
                                            </span>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const Feedback = () => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700">
                        <h3 className="text-lg font-bold text-bcg mb-4"><i className="fas fa-comment-alt mr-2"></i> Leave a Comment</h3>
                        <textarea 
                            className="w-full h-32 p-3 border border-gray-300 dark:border-gray-700 rounded focus:ring-2 focus:ring-bcg outline-none bg-gray-50 dark:bg-gray-900 dark:text-white resize-none"
                            placeholder="Share your thoughts... (Function To Be Done)"
                            disabled
                        ></textarea>
                        <div className="mt-2 text-right">
                            <button disabled className="px-4 py-2 bg-gray-300 text-white rounded cursor-not-allowed text-sm">Submit (TBD)</button>
                        </div>
                    </div>

                    <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700">
                        <h3 className="text-lg font-bold text-bcg mb-4"><i className="fas fa-envelope mr-2"></i> Contact Us</h3>
                        <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">
                            Have questions about Inclusive Excellence or the EOT strategies? Feel free to reach out.
                        </p>
                        <a 
                            href="mailto:smlo@ncnu.edu.tw" 
                            className="inline-flex items-center justify-center w-full px-4 py-3 bg-bcg hover:bg-bcg-dark text-white rounded transition font-semibold"
                        >
                            <i className="fas fa-paper-plane mr-2"></i> Send Email to smlo@ncnu.edu.tw
                        </a>
                    </div>
                </div>
            );
        };

        // --- Main App ---

        const App = () => {
            const [user, setUser] = useState(null); 
            const [quizProgress, setQuizProgress] = useState({}); 
            
            const [lang, setLang] = useState('TC');
            const [theme, setTheme] = useState('light');
            const [activeSection, setActiveSection] = useState(0);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [glossaryTerm, setGlossaryTerm] = useState("");

            // Process Data
            const currentLangMeta = translations[lang]?.meta || translations['ENG'].meta;
            const currentLangLabels = translations[lang]?.labels || translations['ENG'].labels;
            const sections = getSectionData(lang);

            // Theme Effect
            useEffect(() => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [theme]);

            const handleLogin = (userData) => {
                setUser(userData);
            };

            const handleLogout = () => {
                setUser(null);
                setQuizProgress({});
                setActiveSection(0);
            };

            const handleNav = (id) => {
                setActiveSection(id);
                setMobileMenuOpen(false);
                window.scrollTo(0, 0);
            };

            const handleQuizAnswer = (sectionId, qIdx, isCorrect) => {
                if(isCorrect) {
                    setQuizProgress(prev => ({
                        ...prev,
                        [sectionId]: {
                            ...(prev[sectionId] || {}),
                            [qIdx]: true
                        }
                    }));
                }
            };

            // Login View
            if (!user) {
                return <LoginPage onLogin={handleLogin} texts={currentLangMeta} creatorInfo="Creator: Prof. Shihmin Lo, PhD" />;
            }

            const currentData = sections[activeSection];

            // Main View
            return (
                <div className="min-h-screen flex flex-col md:flex-row font-sans">
                    
                    {/* Mobile Header */}
                    <div className="md:hidden bg-bcg text-white p-4 flex justify-between items-center fixed w-full z-50 shadow-md">
                        <div className="font-bold text-lg tracking-wider">EOT</div>
                        <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="text-white focus:outline-none">
                            <i className={`fas ${mobileMenuOpen ? 'fa-times' : 'fa-bars'} text-2xl`}></i>
                        </button>
                    </div>

                    {/* Sidebar / Navigation */}
                    <aside className={`
                        fixed md:sticky top-0 left-0 h-screen w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 
                        transform ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 
                        transition-transform duration-300 ease-in-out z-40 flex flex-col shadow-xl md:shadow-none pt-16 md:pt-0
                    `}>
                        <div className="p-6 border-b border-gray-200 dark:border-gray-800">
                            <h1 className="text-2xl font-bold text-bcg dark:text-bcg-light tracking-tight mb-1">{currentLangMeta.title}</h1>
                            <p className="text-xs text-gray-500 italic mb-4">{currentLangMeta.slogan}</p>
                            
                            <div className="flex flex-col space-y-2">
                                <div className="text-xs text-gray-600 dark:text-gray-400 mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded">
                                    <div className="font-bold truncate">{user.name || user.email.split('@')[0]}</div>
                                    <div className="text-xs opacity-75">{user.identity}</div>
                                    <button onClick={handleLogout} className="mt-1 text-red-500 hover:text-red-700 text-xs font-bold">
                                        <i className="fas fa-sign-out-alt"></i> Logout
                                    </button>
                                </div>

                                <select 
                                    value={lang} 
                                    onChange={(e) => setLang(e.target.value)}
                                    className="px-2 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-xs font-semibold focus:outline-none focus:ring-1 focus:ring-bcg"
                                >
                                    {languageOptions.map(opt => (
                                        <option key={opt.code} value={opt.code}>{opt.label}</option>
                                    ))}
                                </select>
                                
                                <button 
                                    onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}
                                    className="px-2 py-1 rounded border border-gray-300 dark:border-gray-600 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 transition text-xs font-semibold flex items-center justify-center"
                                >
                                    {theme === 'light' ? <span><i className="fas fa-moon mr-1"></i> Dark Mode</span> : <span><i className="fas fa-sun mr-1"></i> Light Mode</span>}
                                </button>
                            </div>
                        </div>

                        <nav className="flex-1 overflow-y-auto py-4">
                            <p className="px-6 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">{currentLangMeta.nav}</p>
                            <ul>
                                {sections.map((sec) => (
                                    <li key={sec.id}>
                                        <button
                                            onClick={() => handleNav(sec.id)}
                                            className={`w-full text-left px-6 py-3 text-sm font-medium transition-colors border-l-4
                                                ${activeSection === sec.id 
                                                    ? 'border-bcg text-bcg bg-green-50 dark:bg-bcg-dark dark:text-white' 
                                                    : 'border-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900'}
                                            `}
                                        >
                                            {sec.title}
                                        </button>
                                    </li>
                                ))}
                            </ul>
                        </nav>

                        <div className="p-6 border-t border-gray-200 dark:border-gray-800 text-xs text-gray-400">
                            <a href="https://www.ibs.ncnu.edu.tw/index.php/faculty/tenured-professor/299-smlo" target="_blank" className="hover:text-bcg transition">
                                Creator: Prof. Shihmin Lo, PhD
                            </a>
                        </div>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 w-full pt-16 md:pt-0 bg-white dark:bg-gray-950 transition-colors duration-300">
                        <div className="max-w-4xl mx-auto p-6 md:p-12 min-h-screen flex flex-col">
                            
                            {/* Header Section */}
                            <header className="mb-10 border-b pb-6 border-gray-200 dark:border-gray-800">
                                <span className="text-bcg dark:text-bcg-light font-bold tracking-widest text-sm uppercase mb-2 block">
                                    EOT Strategy Consulting
                                </span>
                                <h2 className="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white leading-tight">
                                    {currentData.title}
                                </h2>
                            </header>

                            {/* Content Logic Switching */}
                            {currentData.isHistory ? (
                                <UsageHistory user={user} quizProgress={quizProgress} sections={sections} />
                            ) : currentData.isFeedback ? (
                                <Feedback />
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 animate-fade-in">
                                    {/* Left Column */}
                                    <div className="space-y-8">
                                        <section>
                                            <h3 className="text-lg font-bold text-gray-900 dark:text-white mb-4 border-l-4 border-bcg-gold pl-3">
                                                {currentLangLabels.highlights}
                                            </h3>
                                            <div className="space-y-3">
                                                {currentData.highlights.map((item, i) => (
                                                    <div key={i} className="flex items-start">
                                                        <span className="flex-shrink-0 w-1.5 h-1.5 mt-2 bg-bcg rounded-full mr-3"></span>
                                                        <p className="text-gray-700 dark:text-gray-300 text-sm leading-relaxed">{item}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>

                                        <section className="bg-gray-50 dark:bg-gray-900 p-5 rounded-lg border border-gray-100 dark:border-gray-800">
                                            <h3 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                                                <i className="fas fa-tasks text-bcg mr-2"></i> {currentLangLabels.actionPlan}
                                            </h3>
                                            <ul className="space-y-3">
                                                {currentData.actionPlan.map((item, i) => (
                                                    <li key={i} className="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                                        <i className="fas fa-check text-green-500 mr-3 text-xs"></i>
                                                        {item}
                                                    </li>
                                                ))}
                                            </ul>
                                        </section>

                                        <section>
                                            <h3 className="text-sm font-bold text-gray-500 uppercase tracking-wider mb-3">{currentLangLabels.keywords}</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {currentData.keywords.map((kw, i) => (
                                                    <span key={i} className="px-3 py-1 bg-bcg bg-opacity-10 text-bcg dark:text-bcg-light rounded-full text-xs font-semibold">
                                                        #{kw}
                                                    </span>
                                                ))}
                                            </div>
                                        </section>
                                    </div>

                                    {/* Right Column */}
                                    <div className="space-y-8">
                                        {currentData.videos && currentData.videos.length > 0 ? (
                                            <section>
                                                <h3 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                                                    <i className="fas fa-play-circle text-bcg mr-2"></i> {currentLangLabels.videos}
                                                </h3>
                                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                                    {currentData.videos.map((video, i) => (
                                                        <VideoCard key={i} video={video} />
                                                    ))}
                                                </div>
                                            </section>
                                        ) : (
                                            <>
                                                <section>
                                                    <h3 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                                                        <i className="fas fa-layer-group text-bcg mr-2"></i> {currentLangLabels.flashcards}
                                                    </h3>
                                                    <div className="grid grid-cols-1 gap-4">
                                                        {currentData.flashcards.map((fc, i) => (
                                                            <Flashcard key={i} front={fc.front} back={fc.back} instruction={currentLangMeta.try} />
                                                        ))}
                                                    </div>
                                                </section>

                                                <section>
                                                    <h3 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                                                        <i className="fas fa-question-circle text-bcg mr-2"></i> {currentLangLabels.quiz}
                                                    </h3>
                                                    {currentData.quiz.map((q, i) => (
                                                        <Quiz 
                                                            key={i} 
                                                            question={q.q} 
                                                            options={q.options} 
                                                            answer={q.ans} 
                                                            texts={{try: currentLangMeta.try}}
                                                            onAnswer={(isCorrect) => handleQuizAnswer(currentData.id, i, isCorrect)}
                                                            isAnsweredCorrectly={quizProgress[currentData.id]?.[i]}
                                                        />
                                                    ))}
                                                </section>
                                            </>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* Footer Area */}
                            <footer className="mt-auto border-t border-gray-200 dark:border-gray-800 pt-8 pb-4">
                                <div className="flex flex-col md:flex-row justify-between items-center gap-6">
                                    <div className="w-full md:w-1/2">
                                        <label className="block text-xs font-bold text-gray-400 uppercase mb-1">
                                            {currentLangMeta.glossary}
                                        </label>
                                        <select 
                                            className="w-full p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded text-sm text-gray-700 dark:text-gray-300 focus:border-bcg outline-none"
                                            onChange={(e) => setGlossaryTerm(e.target.value)}
                                            value={glossaryTerm}
                                        >
                                            <option value="">Select a term...</option>
                                            {glossaryKeys.map((g, i) => (
                                                <option key={i} value={g.d}>{g.t}</option>
                                            ))}
                                        </select>
                                        {glossaryTerm && (
                                            <div className="mt-2 p-3 bg-blue-50 dark:bg-gray-800 text-blue-900 dark:text-blue-200 text-sm rounded border-l-4 border-blue-500 animate-fade-in">
                                                {glossaryTerm}
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex space-x-4">
                                        <button 
                                            onClick={() => handleNav(activeSection - 1)}
                                            disabled={activeSection === 0}
                                            className={`w-10 h-10 rounded-full flex items-center justify-center transition
                                                ${activeSection === 0 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-bcg text-white hover:bg-bcg-dark shadow-lg'}
                                            `}
                                        >
                                            <i className="fas fa-arrow-left"></i>
                                        </button>
                                        <button 
                                            onClick={() => handleNav(activeSection + 1)}
                                            disabled={activeSection === sections.length - 1}
                                            className={`w-10 h-10 rounded-full flex items-center justify-center transition
                                                ${activeSection === sections.length - 1 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-bcg text-white hover:bg-bcg-dark shadow-lg'}
                                            `}
                                        >
                                            <i className="fas fa-arrow-right"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="flex flex-col md:flex-row justify-center items-center mt-10 text-xs text-gray-400 space-y-2 md:space-y-0 md:space-x-6 border-t border-gray-200 dark:border-gray-800 pt-6">
                                    <div className="flex items-center space-x-4">
                                        <span>{currentLangMeta.copyright}</span>
                                        <span>Version: 2025/12/11</span>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <a href="https://www.ibs.ncnu.edu.tw/index.php/faculty/tenured-professor/299-smlo" target="_blank" className="hover:text-bcg transition">Creator: Prof. Shihmin Lo, PhD</a>
                                        <a href="https://www.ibs.ncnu.edu.tw/" target="_blank" className="hover:text-bcg transition">IBS Official</a>
                                        <a href="https://rpage.ncnu.edu.tw/" target="_blank" className="hover:text-bcg transition">NCNU Official</a>
                                    </div>
                                </div>
                            </footer>

                        </div>
                    </main>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>